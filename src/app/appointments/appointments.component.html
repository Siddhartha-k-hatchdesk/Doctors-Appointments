<div *ngIf="errorMessage" class="alert alert-danger">
  {{ errorMessage }}
</div>

<div *ngIf="!errorMessage">
  <h3 *ngIf="doctorId">Appointments for Doctor {{ doctorId }}</h3>
  <h3 *ngIf="!doctorId && specialistId">Appointments for Specialist {{ specialistId }} (All Doctors)</h3>

  <table class="table table-striped" *ngIf="appointments.length > 0">
    <thead>
      <tr>
        <th>S.No</th>
        <th>Name</th>
        <th>Gender</th>
        <th>Date</th>
        <th>Time</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let appointment of appointments;let i=index">
        <th scope="row">{{ i + 1 }}</th> <!-- Serial Number -->
        <td>{{ appointment.name }}</td>
        <td>{{ appointment.gender }}</td>
        <td>{{ appointment.preferreddate }}</td>
        <td>{{ appointment.preferredtime }}</td>
        <td>{{ appointment.statusName }}</td>
        <td>
          <button *ngIf="appointment.statusName === 'Waiting'" (click)="startAppointment(appointment.id)" class="btn btn-primary">Start</button>
          <button *ngIf="appointment.statusName === 'InProgress'" (click)="completeAppointment(appointment.id)" class="btn btn-success">Complete</button>
          <!-- <button *ngIf="!appointment.doctorName" (click)="pickAppointment(appointment.id)" class="btn btn-secondary">Pick</button> -->
          <!-- Pick button: Show if no doctorName and specialist is selected -->
          <!-- <button *ngIf="!appointment.doctorName && appointment.specialistId" (click)="pickAppointment(appointment.id)" class="btn btn-secondary">Pick</button> -->
          <button *ngIf="!appointment.doctorName && appointment.specialistId && !appointment.picked" 
        (click)="pickAppointment(appointment.id)" 
        class="btn btn-secondary">
  Pick
</button>

        </td>
      </tr>
    </tbody>
  </table>
</div>
